<%= render "shared/header" %>
<div class='pfc-graph'>
  グラフ
</div>

<div class="pfc-item-select-index">
  選択中食材一覧
</div>

<div class="pfc-item-new-button">
  <%= link_to new_item_path do %>
    <span>新しい食材を登録する</span>
  <% end %>
</div>

<div class="pfc-item-regisration-index">
  アイテム一覧
</div>

<div>
  <!-- 検索フォーム -->
  <%= form_with(url: search_items_path, method: :get, local: true, id: 'item-search-form') do |search_form| %>
    <%= search_form.text_field :keyword, placeholder: "食材を検索", id: 'item-search-keyword' %>
  <% end %>
</div>

<!-- フォームに追加するアイテムのチェックボックス -->
<%= form_with(model: @pfc, local: true) do |form| %>
  <!-- その他のフォームフィールド -->
  <%= form.date_field :day, class: "pfc-time-select-day", value: Date.today %>
  <%= form.collection_select(:timezone_id, Timezone.all, :id, :name, {}, { class: "pfc-timezone-select", id: "timezone_id" }) %>
  <%= form.time_field :time, class: "pfc-time-select-time", value: Time.now.strftime("%H:%M") %>

  <div id="search-results">
    <% @items.each do |item| %>
      <div class="item-checkbox-percentage">
        <%= check_box_tag 'pfc[item_ids][]', item.id, @pfc.item_ids.include?(item.id), class: 'item-checkbox', data: { item_id: item.id } %>
        <%= label_tag "pfc_item_#{item.id}", item.item_name %>
        
        <%= number_field_tag "pfc[adjustment_percentages][#{item.id}]", 100, step: 0.1, min: 0, id: "percentage_#{item.id}", style: 'display: none;' %>
        <%= label_tag "percentage_#{item.id}", " (%)" %>
      </div>
    <% end %>
  </div>

  <div>
    <%= form.submit "保存" %>
  </div>
<% end %>




